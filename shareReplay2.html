<!DOCTYPE html>
<html lang="en">
<head></head>
<body>
<script src="/bower_components/rxjs/dist/rx.all.js"></script>
<script>
    var interval = Rx.Observable.interval(1000);

    var source = interval
            .take(4)
            .doAction(function (x) {
                console.log('Side effect');
            });

    var published = source
            .shareReplay(2);

    published.delay(3000).subscribe(createObserver('SourceA'));
    published.subscribe(createObserver('SourceB'));

    // Creating a third subscription after the previous two subscriptions have
    // completed. Notice that no side effects result from this subscription,
    // because the notifications are cached and replayed.
    Rx.Observable
            .return(true)
            .delay(12000)
            .flatMap(published)
            .subscribe(createObserver('SourceC'));

    function createObserver(tag) {
        return Rx.Observer.create(
                function (x) {
                    console.log('Next: ' + tag + x);
                },
                function (err) {
                    console.log('Error: ' + err);
                },
                function () {
                    console.log('Completed');
                });
    }


</script>

</body>
</html>